version: 1.0.0
variables:
  global:
    N3_KEY: 4cc82f0f-9613-41cd-b479-388ff408bb1c
    # For the POC to work, you must add the N3_SECRET environment variable
    # containing your Cloud API secret key:
    #
    # echo -n 'your secret' | pipelines encrypt - --add variables.global.N3_SECRET
    N3_SECRET:
      secure: 2acSypjbNdAgMcmSfLRDicphPaFDa4iDWV/OC9RXZpS2FVJ3m7uPvWG/kjHv+v9dvKlXWtIFRBF1inuOWydMgTobAnK0kv/NDg3yUbrv1DbeZpY2zfasMnfNH7iBLbdN9DQgg6Lr8JuwPpvUtaHefLILe02BxzSGvLgr9zZvSqWFiVI5Fe28f+hGt16d7dVH6R5D2HY5ykxDzi8UCuNe72qJpnw3pkrLCX5pL0/7pBcIexH/jIosjWjhUT9ghayD9FWOlu0mIQkazV7gd6JYvHKQQZRNydv0KI/YEnuW4y8SDDzw5W0aIDkaeWU81d2uTTZgeKnRrdaTH/qfBC0ooike5N0rDAKNkg/4/7JbVqE5qwfzWvvln7SCzPhk1VLcCv9tRnkoNZQe1hfEXJ7ibDDpd8tzC50mLh6eUqtD+C8yEDKffhiKxZK1U9ZZbIYuroheRt6DX4mQDcSXev6XYLdcbgSj1EY5NMr332UriZ7YHHWU/ObzMf+AxTLUeI52iQZjE2NUv4mLGa/pQ9V6wC5De8TDnsWM8LxuhSJDtDKTaoiv/gQ3FHDLutUYwGAEeUYHurMcI0cN0XjTf9meiWJd6Lw1r3NWVRUrmSV1r6QwacQlBJbsms57jibNPw1PWRtOAdPnTan6RmL4xNhuoIJrDEBkCghcD4ULJmHT3Xsv94=SrA6bW/h5/daex4TYE1zw2lrpQG/e3P3v24AzdWfOFmgptpQYxTC17Vj8e1JyK5oES7oXids/TpqT8olMoqOMORi1mhCStbkqs5IB9x6zxVFGr+7jh45IQM/65D/6H7iypORIEju1mM2itS8E1t57huYsUDaUGpF/ADX+Qome9s=
    PIPELINES_DEPLOY_URL: https://github.com/acquia/pipelines-examples/releases/download/deploy-latest/pipelines-deploy
    PIPELINES_DEPLOY_TOOL: $HOME/pipelines-deploy
events:
  build:
    steps:
      # If you have build instructions, put them here. They are not required.
      - build_site:
          script:
            - set -x

      # Deploy the build artifact to a Cloud on-demand environment.
      - deploy:
          script:
            - curl -o $PIPELINES_DEPLOY_TOOL -L "$PIPELINES_DEPLOY_URL" && chmod 755 $PIPELINES_DEPLOY_TOOL
            - $PIPELINES_DEPLOY_TOOL

  merge:
    steps:
      # When a GitHub pull request is merged, this deletes the coresponding ODE.
      - deploy:
          script:
            - curl -o $PIPELINES_DEPLOY_TOOL -L "$PIPELINES_DEPLOY_URL" && chmod 755 $PIPELINES_DEPLOY_TOOL
            - $PIPELINES_DEPLOY_TOOL
